<app-home-hero
  [description]="'Discover the excitement of our past draws and see if you were a winner!'"
  [title]="'Past Draws'"
></app-home-hero>

<div class="container table-responsive py-5">
  <div class="mb-3">
    <input type="text" 
           class="form-control" 
           placeholder="Search draws..." 
           [(ngModel)]="searchTerm" 
           (input)="handleSearch()">
  </div>

  <table class="table table-bordered">
    <thead class="thead-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Draw Ref</th>
        <th scope="col">Name</th>
        <th scope="col">Correct Numbers</th>
        <th scope="col">Close Time</th>
        <th scope="col"> Details </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let draw of filteredDraws; let i = index">
        <th scope="row">{{ i + 1 + (currentPage - 1) * itemsPerPage }}</th>
        <td>{{ draw.drawRef }}</td>
        <td>{{ draw.name }}</td>
        <td>{{ draw.correctNumbers }}</td>
        <td>{{ draw.closeTime | date:'medium' }}</td>
        <td (click)="view(draw); $event.stopPropagation()">{{ "View" }}</td>
      </tr>
      <tr *ngIf="filteredDraws.length === 0 && !isLoading">
        <td colspan="6" class="text-center">No draws found</td>
      </tr>
      <tr *ngIf="isLoading">
        <td colspan="6" class="text-center">Loading...</td>
      </tr>
    </tbody>
  </table>

  <nav *ngIf="totalPages > 1" class="my-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="previousPage()">Previous</a>
      </li>
      <li class="page-item" *ngFor="let page of getPages()" [class.active]="page === currentPage">
        <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="nextPage()">Next</a>
      </li>
    </ul>
  </nav>
</div>
<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <h1 class="main-title">Lotto General Media</h1>
    </div>
  </header>

  <!-- Main Content -->
  <div class="dashboard-content">
    <!-- Products Section -->
    @if (showOldGames) {
      <section class="products-section">
        <div class="section-header">
          <h2 class="section-title">Available Products</h2>
          <div>
            <button
              class="toggle-btn rounded-pill"
              (click)="gotoSettings()"
            >    
              <i class="bi bi-gear"></i>  Account Setting
            </button>
          </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid">
          @for (game of oldGames; track game.gameId) {
            <div class="product-card" (click)="setMatch(game)">
              <!-- Card Header -->
              <div class="card-header">
                <span class="status-badge active">{{ game.tag }}</span>
              </div>

              <!-- Card Body -->
              <div class="card-body" (click)="setMatch(game)">
                <div class="product-image">
                  <img
                    [src]="game.gameImage"
                    [alt]="game.gameName"
                    class="game-icon"
                  />
                </div>

                <div class="product-info">
                  <h3 class="product-name">{{ game.gameName }}</h3>
                  <p class="product-code">{{ game.gameShortcode }}</p>
                </div>
              </div>

              <!-- Card Footer -->
              <div class="card-footer">
                <button
                  class="open-btn rounded-pill"
                  [routerLink]="game.gameRoute"
                  (click)="setMatch(game); $event.stopPropagation()"
                >
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    ></path>
                    <polyline points="15,3 21,3 21,9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                  Open
                </button>
              </div>
            </div>
          }
        </div>
      </section>
    }

    <!-- Recent Apps Section -->
    @if (recentApps.length > 0) {
      <section class="recent-section">
        <div class="section-header">
          <h2 class="section-title mr-3">Recently Opened</h2>
          <span class="item-count">{{ recentApps.length }} items</span>
        </div>

        <div class="recent-apps-list">
          @for (app of recentApps; track app.gameId) {
            <div class="recent-app-item">
              <div class="recent-app-details">
                <h4 class="recent-app-name">{{ app.gameName }}</h4>
                <div class="recent-app-meta">
                  <!-- Timestamp -->
                  <span class="timestamp">
                    <svg
                      width="14"
                      height="14"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    {{ app.timestamp | date: "medium" }}
                  </span>

                  <!-- Forecast Badge -->
                  @if (app.forecastCreated) {
                    <span class="forecast-badge">
                      <svg
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="20,6 9,17 4,12"></polyline>
                      </svg>
                      Forecast Created
                    </span>
                  }
                </div>
              </div>
            </div>
          }
        </div>
      </section>
    }

    <!-- Empty State -->
    @if (recentApps.length === 0 && !showOldGames) {
      <div class="empty-state">
        <div class="empty-icon">
          <svg
            width="64"
            height="64"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          >
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <polyline points="21,15 16,10 5,21"></polyline>
          </svg>
        </div>
        <h3>No Recent Activity</h3>
        <p>Start by opening a product to see your recent games here.</p>
      </div>
    }
  </div>
</div>